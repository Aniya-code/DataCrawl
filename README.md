# DataCrawl
一共3套采集程序
## 
## 1.URL-fingerprint
流程：
1.输入：博主主页URL
2.爬虫爬取主页所有视频的URL、并获取每个视频的时长、质量等信息
3.流量指纹提取代码，从每个URL多线程下载网页源码、视频文件头部，解析网页源代码提取出关键信息，定位容器关键box，提取视频指纹
4.输出：URL列表文件、URLinfo文件、网页源代码文件、视频文件头部、指纹文件

## 2.QUIC-url-har-pcap
流程：
1.输入：URL列表文件、登陆cookie文件、图像定位插件
2.携带cookie加载youtube.com，依次访问URL列表文件中的URL，
3.启动tshark,开始捕获流量
4.指定视频URL网页加载，启动开发者工具，根据图像定位插件定位并点击“网络”，输入“videoplayback”，har文件正常开始捕获
5.视频播放剩余5秒钟时，图像定位到har文件保存按钮，保存har文件，关闭网页，关闭tshark，抓包完毕
6.解析har文件，提取应用层视频块大小，作为应用层流量指纹
7.解析pcap文件，加密流量指纹提取算法获取加密视频块大小，作为加密流量指纹
8.用线性回归拟合应用层流量指纹和加密流量指纹的拟合公式，得到y=wx+b的w,b
9.识别场景中只抓取pcap，没有har，应用拟合公式将加密流量指纹映射为应用层流量指纹（最终目标），用于后续匹配
10.输出：har文件、pcap文件、加密流量指纹、应用层流量指纹、拟合参数w b



## 3.TLS-url-mitm-pcap
流程：
1.输入：URL列表文件、登陆cookie文件
2.携带cookie加载youtube.com，依次访问URL列表文件中的URL，
3.启动tshark,开始捕获流量
4.启动mitmproxy，开始监听8080端口进行中间人攻击，解析实时流量并获取应用层视频块大小
5.视频播放剩余5秒钟时，关闭tshark，抓包完毕；停止motiproxy监听，会获得应用层视频流量指纹
6.解析pcap文件，加密流量指纹提取算法获取加密视频块大小，作为加密流量指纹
7.用线性回归拟合应用层视频流量指纹和加密流量指纹的拟合公式，得到y=wx+b的w,b
8.识别场景中只抓取pcap，没有har，应用拟合公式将加密流量指纹映射为应用层流量指纹（最终目标），用于后续匹配
9.输出：har文件、pcap文件、加密流量指纹、应用层流量指纹、拟合参数w b
